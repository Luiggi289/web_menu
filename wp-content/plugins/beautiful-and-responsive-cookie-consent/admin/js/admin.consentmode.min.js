(function () {
  'use strict';

  function _typeof(o) {
    "@babel/helpers - typeof";

    return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
      return typeof o;
    } : function (o) {
      return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
    }, _typeof(o);
  }

  function addConsentModeTableToPage(){var e,t=nscBarConsentType;try{e=JSON.parse(getHiddenInputField().value);}catch(e){}"object"===_typeof(e)&&null!==e||(e={}),generateTable([{coMoCategory:"analytics_storage",name:"analytics_storage (required)"},{coMoCategory:"ad_storage",name:"ad_storage (required)"},{coMoCategory:"ad_personalization",name:"ad_personalization (required)"},{coMoCategory:"ad_user_data",name:"ad_user_data (required)"},{coMoCategory:"functionality_storage",name:"functionality_storage (optional)"},{coMoCategory:"personalization_storage",name:"personalization_storage (optional)"},{coMoCategory:"security_storage",name:"security_storage (optional)"}],e,t);}function generateTable(e,t,a){var o,n="nsc_bar_consentmode_table";try{o=document.querySelector("#".concat("ff_nsc_bar_consentModeConfig"));}catch(e){}if(o){var r=document.createElement("table");r.classList.add(n),r.id=n;var c=(r=generateTableHead(r)).createTBody(),d=!0;e.forEach((function(e){var o=c.insertRow(),n=d?"nsc_bar_first":"nsc_bar_second";o.classList.add(n);var r=createTableHead(e.name);r.classList.add("nsc_bar_comocat"),o.appendChild(r);for(var i=getCookieSuffixes(a),l=0;l<i.length;l+=1){var s=o.insertCell(),u=isChecked(e.coMoCategory,t,i[l]),g=createCheckbox("".concat(i[l]),"".concat(e.coMoCategory),u);if(s.setAttribute("id","grantedFor_".concat(e.coMoCategory,"_").concat(i[l])),s.setAttribute("class","colgrantedFor_".concat(e.coMoCategory)),s.setAttribute("aria-label","".concat(i[l])),s.appendChild(g),l!==i.length-1)o.insertCell().innerText="or";}d=!d;})),o.parentNode.appendChild(r);}}function isChecked(e,t,a){return !(!t[e]||!Array.isArray(t[e]))&&t[e].includes(a)}function generateTableHead(e){var t=e.createTHead().insertRow(),a=!0;return ["Consent Mode category","Will be granted, if user selects:"].forEach((function(e){var o=createTableHead(e);!1===a&&o.setAttribute("colspan",4),t.appendChild(o),a=!1;})),e}function createTableHead(e){var t=document.createElement("th"),a=document.createTextNode(e);return t.appendChild(a),t}function createCheckbox(e,t,a){var o=document.createElement("input");o.type="checkbox",o.id="".concat(t,"_").concat(e),o.checked=a,o.className="toggle-checkbox",o.value=e,o.setAttribute("data-comoCat",t),o.onclick=buildHiddenInputJSON;var n=document.createElement("label");n.htmlFor="".concat(t,"_").concat(e),n.classList.add("toggle-label");var r=document.createElement("span");r.classList.add("toggle-label-text"),r.innerText="".concat(e),n.appendChild(r);var c=document.createElement("div");return c.className="toggle-container",c.appendChild(o),c.appendChild(n),c}function buildHiddenInputJSON(){for(var e={},t=document.querySelectorAll("#nsc_bar_consentmode_table > tbody > tr"),a=0;a<t.length;a+=1)for(var o=t[a].getElementsByClassName("toggle-checkbox"),n=0;n<o.length;n+=1){var r=o[n];if(r.checked){var c=r.dataset.comocat;e[c]=e[c]||[],e[c].push(r.value);}}getHiddenInputField().value=JSON.stringify(e);}function getCookieSuffixes(e){var t=[];if("detailed"===e||"detailedRev"===e)for(var a=0;a<nscBarCookieTypes.length;a+=1)t.push(nscBarCookieTypes[a].cookie_suffix);return "info"===e&&t.push("allow"),["opt-in","opt-out"].includes(e)&&(t.push("allow"),t.push("deny")),t}function getHiddenInputField(){var e;try{e=document.getElementById("ff_nsc_bar_consentModeConfig");}catch(t){console.error("Could not get hidden input field.",e);}return e}

  function addListenerForAlreadyReviewed(){var e=document.getElementById("nsc_bar_notice_reviewedAlready");e&&e.addEventListener("click",saveReviewSetting);}function saveReviewSetting(){var e=document.getElementById("nsc_bar_notice_reviewedAlready");e.disabled=!0,e.innerHTML="thank you, saving...";var n=new XMLHttpRequest;n.withCredentials=!0,n.addEventListener("readystatechange",(function(){4===this.readyState&&(document.getElementById("nsc_bar_notice_please_rate").style.display="none");})),n.open("POST","".concat(phpVars.restURL,"beautiful-and-responsive-cookie-consent/v1/admin-notices")),n.setRequestHeader("_wpnonce",phpVars.nonce),n.setRequestHeader("X-WP-Nonce",phpVars.nonce),n.send("");}

  document.addEventListener("DOMContentLoaded",addConsentModeTableToPage),document.addEventListener("DOMContentLoaded",addListenerForAlreadyReviewed);

})();
